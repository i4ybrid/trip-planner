# Frontend Dockerfile - Test
FROM node:20

WORKDIR /app
COPY package*.json ./
RUN npm ci --legacy-peer-deps

RUN npm install -D @playwright/test && npx playwright install chromium

COPY vitest.config.ts ./
COPY tailwind.config.js ./
COPY postcss.config.js ./
COPY next.config.js ./
COPY tsconfig.json ./
COPY next-env.d.ts ./
COPY src/ ./src/

CMD ["sh", "-c", "npm run test:unit -- --coverage"]
